{% extends 'core/dashboard_base.html' %}
{% load static %}

{% block dashboard_title %}Create Blood Request - HemoVital{% endblock %}

{% block extra_dashboard_css %}
    {# CORRECTED: The path now correctly points to the core app's CSS file #}
    <link rel="stylesheet" href="{% static 'core/css/create_request.css' %}">
{% endblock %}

{% block page_title %}
    Create New Blood Request
{% endblock %}

{% block dashboard_content %}

<div class="form-page-container">
    <div class="content-card">
        <form method="post" class="styled-form" novalidate>
            {% csrf_token %}

            <div class="card-header-main">
                <h3><i class="fas fa-notes-medical"></i> Patient & Request Details</h3>
            </div>

            <div class="card-body">
                <p class="form-description">
                    Please fill out the details below accurately. Matching donors in your area will be notified automatically once the request is submitted.
                </p>

                {% if form.non_field_errors %}
                    <div class="form-error-summary">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                <div class="form-grid">
                    {% for field in form %}
                        <div class="form-group {% if field.name == 'address' or field.name == 'notes' %}full-width{% endif %}">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field }}
                            {% if field.help_text %}
                                <small class="field-help-text">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <p class="input-error-message">{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="card-footer">
                <a href="{% url 'core:hospital_dashboard' %}" class="btn-secondary">Cancel</a>
                <button type="submit" class="btn-primary">
                    <i class="fas fa-paper-plane"></i> Submit Request
                </button>
            </div>
        </form>
    </div>
</div>

{% endblock %}

